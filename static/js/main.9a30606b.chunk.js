(this["webpackJsonpneighbouring-cells-game"]=this["webpackJsonpneighbouring-cells-game"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(0),r=n.n(c),o=n(11),i=n.n(o),l=(n(90),n(91),n(145)),s=n(12),j=n(144),u=n(147),b=new Map([["teal","#19FA8C"],["blue","#4C32FA"],["yellow","#FADA0C"],["red","#FA1E00"]]),d=new Map([["teal","#FFA966"],["blue","#CE4DFF"],["yellow","#C3FF38"],["red","#40E8FF"]]),h=new Map([["black","#80682E"],["poo","#FFE6A8"],["purple","#B0CC49"],["brown","#CCA749"]]),O=Array.from(b.keys()),f=21,x=18,g="Default",m=new Map([["Default",b],["Kaki",h],["Shmlasha",d]]),p=[18,24,32],v=n(25),y=n(72),C=n(138),k=n(131),S=n(65),w=n(49),F=n(50),A=function(){function e(){Object(w.a)(this,e)}return Object(F.a)(e,null,[{key:"getRandomItem",value:function(e){return e[Math.floor(Math.random()*e.length)]}}]),e}(),z=new(function(){function e(t){Object(w.a)(this,e),this.defaultCellColors=t.colors}return Object(F.a)(e,[{key:"generateRandomBoard",value:function(e,t){for(var n=Array.from(t.keys()),a=[],c=0;c<e;++c){for(var r=[],o=0;o<e;++o)r.push(A.getRandomItem(n||this.defaultCellColors));a.push(r)}return a}},{key:"repaint",value:function(e,t){var n=this,a=t.slice(),c=new Set(["0|0"]),r=a[0][0];return function e(t){var o=n.getNeighbours(a.length-1,a,r,t,c);if(o.length>0){var i,l=Object(S.a)(o);try{for(l.s();!(i=l.n()).done;){var s=i.value;c.add(n.cellToString(s)),e(s)}}catch(j){l.e(j)}finally{l.f()}}return c}([0,0]).forEach((function(t){var n=t.split("|"),c=Object(s.a)(n,2),r=c[0],o=c[1];a[r][o]=e})),a}},{key:"cellToString",value:function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return"".concat(n,"|").concat(a)}},{key:"getNeighbours",value:function(e,t,n,a,c){var r=this,o=Object(s.a)(a,2),i=o[0],l=o[1];return[i<e?[i+1,l]:[],0!==i?[i-1,l]:[],0!==l?[i,l-1]:[],l<e?[i,l+1]:[]].filter((function(e){return e.length>0&&t[e[0]][e[1]]===n&&!c.has(r.cellToString(e))}))}},{key:"isHomogeneous",value:function(e){var t=e[0][0];return 0===e.filter((function(e){return e.filter((function(e){return!(e===t)})).length>0})).length}}]),e}())({colors:O}),M=Object(k.a)((function(e){return{btn:{border:"none",cursor:"pointer",width:24,height:24},root:Object(v.a)({display:"flex",justifyContent:"center"},e.breakpoints.down("xs"),{justifyContent:"space-around"})}}));function T(e){var t=e.onColorSelect,n=e.colorMap,r=void 0===n?b:n,o=Object(c.useRef)(t).current,i=M(),l=Array.from(r.keys());return Object(c.useEffect)((function(){function e(e){if(!(e.code.indexOf("Digit")<0)){var t=parseInt(e.code.split("Digit")[1]);t>4||o(l[t-1])}}return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[l,o]),Object(a.jsx)(u.a,{className:i.root,children:l.map((function(e){return Object(a.jsx)("button",{title:e,onClick:function(){return t(e)},style:{backgroundColor:r.get(e)},className:i.btn},e)}))})}var E=n(151),I=n(135),N=n(136),W=n(137),B=Object(k.a)((function(e){return{root:{textAlign:"center","& .MuiDialog-paperWidthFalse":{width:"80%"}}}}));function D(e){var t=e.text,n=e.title,c=e.open,r=e.action,o=B();return Object(a.jsxs)(E.a,{open:c,maxWidth:!1,onClose:r,disableBackdropClick:!0,className:o.root,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(a.jsx)(I.a,{children:n}),Object(a.jsx)(N.a,{children:Object(a.jsx)(y.a,{children:t})}),Object(a.jsx)(W.a,{children:Object(a.jsx)(u.a,{textAlign:"center",width:"100%",mb:1.5,children:Object(a.jsx)(C.a,{onClick:r,variant:"contained",children:"Restart"})})})]})}var R=Object(k.a)((function(e){var t;return{cell:(t={width:"100%",margin:1,transition:"background-color .25s"},Object(v.a)(t,e.breakpoints.up("sm"),{width:function(e){return e.cellWidth}}),Object(v.a)(t,"&:after",{content:"''",display:"block",paddingTop:"100%"}),t)}}));function H(e){var t=e.boardData,n=e.onColorSelect,c=e.size,r=e.gameControlsHeight,o=e.colorMap,i=void 0===o?b:o,l=(window.innerHeight-(r||0)-240)/c,s=R({size:c,cellWidth:l});return Object(a.jsx)(a.Fragment,{children:t.map((function(e,t){return Object(a.jsx)(u.a,{display:"flex",children:e.map((function(e,c){return Object(a.jsx)("div",{role:"button",onClick:function(){return n(e)},className:"".concat(s.cell),style:{backgroundColor:i.get(e)}},"".concat(t,"-").concat(c))}))},t)}))})}var L=Object(k.a)((function(e){return{board:Object(v.a)({},e.breakpoints.up("sm"),{display:"inline-block"})}}));function G(e){var t=e.size,n=e.rounds,r=e.colorMap,o=L(),i=Object(c.useState)(z.generateRandomBoard(t,r)),l=Object(s.a)(i,2),j=l[0],b=l[1],d=Object(c.useState)(1),h=Object(s.a)(d,2),O=h[0],f=h[1],x=Object(c.useState)(!1),g=Object(s.a)(x,2),m=g[0],p=g[1],v=Object(c.useState)(),k=Object(s.a)(v,2),S=k[0],w=k[1];function F(e){var t=z.repaint(e,j);z.isHomogeneous(t)&&p(!0),b(t),f(O+1)}function A(){f(1),p(!1),b(z.generateRandomBoard(t,r))}var M="game-controls";return Object(c.useEffect)((function(){var e=document.getElementById(M);b(z.generateRandomBoard(t,r)),w(e&&e.offsetHeight)}),[t,r]),Object(a.jsxs)(u.a,{width:"100%",textAlign:"center",children:[Object(a.jsx)(u.a,{className:o.board,children:Object(a.jsx)(H,{size:t,colorMap:r,boardData:j,onColorSelect:F,gameControlsHeight:S})}),Object(a.jsxs)(u.a,{id:M,mt:2,className:o.controls,children:[Object(a.jsx)(u.a,{textAlign:"center",children:Object(a.jsxs)(y.a,{variant:"body1",children:["Round ",O,"/",n]})}),Object(a.jsx)(u.a,{my:4,children:Object(a.jsx)(T,{onColorSelect:F,colorMap:r})}),Object(a.jsx)(u.a,{mt:3,textAlign:"center",children:Object(a.jsx)(C.a,{variant:"contained",onClick:A,children:"Restart"})})]}),Object(a.jsx)(D,{title:"The game beat you",text:"Want a revenge?",action:A,open:O>n}),Object(a.jsx)(D,{title:"Congratulations!",text:"You beat the game",action:A,open:m})]})}var J=n(139),P=n(140),Y=n(152),K=n(141),q=n(149),Q=n(146);function U(e){var t=e.settings,n=e.setSettings,r=e.setTab,o=Object(c.useState)(t.size),i=Object(s.a)(o,2),l=i[0],j=i[1],b=Object(c.useState)(t.rounds),d=Object(s.a)(b,2),h=d[0],O=d[1],f=Object(c.useState)(t.theme),x=Object(s.a)(f,2),g=x[0],v=x[1];return Object(a.jsx)(u.a,{children:Object(a.jsxs)("form",{children:[Object(a.jsxs)(J.a,{component:"fieldset",fullWidth:!0,children:[Object(a.jsx)(P.a,{component:"legend",children:"Board size"}),Object(a.jsx)(Y.a,{"aria-label":"board-size",name:"board-size",value:l,onChange:function(e){return j(parseInt(e.target.value))},children:p.map((function(e){return Object(a.jsx)(K.a,{value:e,control:Object(a.jsx)(q.a,{}),label:"".concat(e)},e)}))})]}),Object(a.jsx)(u.a,{mt:4,children:Object(a.jsxs)(J.a,{component:"fieldset",fullWidth:!0,children:[Object(a.jsx)(P.a,{component:"legend",children:"Theme"}),Object(a.jsx)(Y.a,{"aria-label":"board-size",name:"board-size",value:g,onChange:function(e){return v(e.target.value)},children:Array.from(m.keys()).map((function(e){return Object(a.jsx)(K.a,{value:e,control:Object(a.jsx)(q.a,{}),label:e},e)}))})]})}),Object(a.jsx)(u.a,{mt:4,children:Object(a.jsx)(J.a,{fullWidth:!0,children:Object(a.jsx)(Q.a,{id:"rounds",label:"Number of rounds",size:"small",value:h||"",variant:"outlined",onChange:function(e){return O(parseInt(e.target.value))}})})}),Object(a.jsx)(u.a,{mt:4,children:Object(a.jsx)(C.a,{variant:"contained",onClick:function(){n({size:l,rounds:h,theme:g}),r(0)},children:"Save & Start"})})]})})}var V=n(41),X=n(148),Z=n(143);function $(e){var t=e.setTab,n=e.tab,c=r.a.useState(n),o=Object(s.a)(c,2),i=o[0],l=o[1];function j(e){return{id:"tab-".concat(e),"aria-controls":"tabpanel-".concat(e)}}return r.a.useEffect((function(){l(n)}),[n]),Object(a.jsx)(u.a,{children:Object(a.jsxs)(X.a,{value:i,onChange:function(e,n){l(n),t(n)},variant:"fullWidth",textColor:"primary",indicatorColor:"primary",children:[Object(a.jsx)(Z.a,Object(V.a)({label:"Game"},j(0))),Object(a.jsx)(Z.a,Object(V.a)({label:"Settings"},j(1)))]})})}var _=n(70);function ee(e){var t=e.children,n=e.value,c=e.index,r=Object(_.a)(e,["children","value","index"]);return Object(a.jsx)("div",Object(V.a)(Object(V.a)({role:"tabpanel",hidden:n!==c,id:"tabpanel-".concat(c),"aria-labelledby":"full-width-tab-".concat(c)},r),{},{children:n===c&&Object(a.jsx)(a.Fragment,{children:t})}))}var te=n(142),ne=n(69),ae=n.n(ne),ce=Object(k.a)((function(e){return{tooltipIcon:{top:"50%",right:"0",position:"absolute",transform:"translateY(-50%)"}}}));function re(){var e=ce(),t=Object(c.useState)(!1),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(a.jsxs)(u.a,{textAlign:"center",children:[Object(a.jsx)(u.a,{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(y.a,{variant:"h5",children:"Neighbouring Cells"}),Object(a.jsx)(u.a,{className:e.tooltipIcon,children:Object(a.jsx)(te.a,{onClick:function(){return o(!0)},children:Object(a.jsx)(ae.a,{fontSize:"small"})})})]})}),Object(a.jsxs)(E.a,{open:r,maxWidth:"md",onClose:function(){return o(!1)},children:[Object(a.jsx)(I.a,{children:"How to play"}),Object(a.jsx)(N.a,{children:"\n    The goal is to paint all board cells the same color.\n    At the beginning of each round, the color of the top left (initial) cell is selected.\n    The newly selected color will spread to other cells which have the same color as the initial one and are adjacent to each other (have a common top, right, bottom or left border). \n"}),Object(a.jsx)(W.a,{children:Object(a.jsx)(C.a,{onClick:function(){return o(!1)},children:"Got it"})})]})]})}function oe(){var e=r.a.useState(0),t=Object(s.a)(e,2),n=t[0],c=t[1],o=r.a.useState({size:x,theme:g,rounds:f}),i=Object(s.a)(o,2),l=i[0],b=i[1];return Object(a.jsx)(j.a,{maxWidth:"sm",children:Object(a.jsxs)(u.a,{children:[Object(a.jsx)(u.a,{mb:2,py:2,children:Object(a.jsx)(re,{})}),Object(a.jsx)($,{setTab:c,tab:n}),Object(a.jsxs)("div",{children:[Object(a.jsx)(ee,{value:n,index:0,children:Object(a.jsx)(u.a,{id:"game-tab-content",display:"flex",justifyContent:"center",py:3,children:Object(a.jsx)(G,{size:l.size,rounds:l.rounds,colorMap:m.get(l.theme)})})}),Object(a.jsx)(ee,{value:n,index:1,children:Object(a.jsx)(u.a,{id:"settings-tab-content",py:3,children:Object(a.jsx)(U,{settings:l,setSettings:b,setTab:c})})})]})]})})}var ie=function(){return Object(a.jsxs)("main",{children:[Object(a.jsx)(l.a,{}),Object(a.jsx)(oe,{})]})},le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,155)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(ie,{})}),document.getElementById("root")),le()},90:function(e,t,n){},91:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.9a30606b.chunk.js.map